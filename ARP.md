
# MAC과 IP 주소는 어떻게 연결될까?

Mac 주소는 데이터 링크 계층에서 사용되고, IP 주소는 네트워크 계층에서 사용된다.
**ARP(Address Resoltuin Protocol)** 는 두 계층을 연결하는 역할을 한다.

## 데이터를 전송하는 흐름 확인

네트워크 계층의 IP는 패킷에서 목적지 IP 주소를 보고, 이더넷에 패킷을 전달하고자 목적지 MAC 주소를 조사하는데, 이때 이용하는 것이 ARP이다.

목적지 IP주소 192.168.5.10에 패킷을 전송하는 흐름은 아래와 같다.
1. 목적지 IP 주소 192.168.5.10 을 가진 MAC 주소를 ARP가 검색해서 알려줌
2. IP는 전달받은 MAC 주소를 패킷의 MAC 헤더에 추가해서 데이터를 전송

![](https://i.imgur.com/CtH9yHf.png)


## ARP는 어떻게 MAC 주소를 찾을까?

ARP가 IP 주소로 MAC 주소를 검색하는 과정은 아래 세 단계를 거치고, 
**ARP 요청, ARP 응답, ARP 캐싱** 이라고 한다.

1. 같은 네트워크 기기를 전체 호출(ARP 요청)
2. 호출한 조건에 맞는 기기가 응답(ARP 응답)
3. 조회한 결과를 기록(ARP 캐싱)
	- ARP 캐시 정보는 ARP 테이블이라는 곳에 있음
	- 윈도우 기준 arp -a
 
![](https://i.imgur.com/Dp4b1Fr.png)

