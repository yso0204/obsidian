## 데이터베이스 시스템의 정의
> 데이터베이스 시스템 DBS은 데이터베이스에 데이터를 저장하고, 저장된 데이터를 관리하여 조직에 필요한 정보를 생성해주는 시스템

![](https://i.imgur.com/JPmEpuL.png)

## 데이터베이스의 구조
### 스키마(schema)
>데이터베이스에 저장되는 데이터 구조와 제약조건을 정의

![](https://i.imgur.com/zTfuVFi.png)

### 인스턴스(instance)
> 정의된 스키마에 따라 실제 데이터베이스에 실제로 저장된 값

### 3단계 데이터베이스 구조
> 미국 표준화 기관인 ANSI/SPARC 에서 제안한
> 데이터베이스를 쉽게 이해하고 이용할 수 있도록 하나의 데이터베이스를 관점에 따라 구분

1. 외부 단계(external level) : 개별 사용자 관점
2. 개념 단계(conceptual level) : 조직 전체의 관점
3. 내부 단계(internal level) : 물리적인 저장 장치의 관점

- 각 단계 별로 다른 추상화(abstraction)  제공
	- 내부단계에서 외부단계로 갈수록 추상화 레벨이 높아진다.
![](https://i.imgur.com/6DJZHSc.png)
> 집주인은 본인의 집에 대해서만 관심을 가지고
> 관리인은 아파트 전체, 건설 업체는 지반이나, 구조 등에 관심을 가진다.

#### 외부 단계
> 개별 사용자 관점에서 데이터베이스를 이해하고 표현
> 일반 사용자, 혹은 프로그램이 데이터베이스의 '일부'만 보고 사용

- 하나의 데이터베이스를 조직 내 사용자들이 함께 사용하지만, 각 사용자가 데이터베이스 전체에 관심이 있는것은 아님
- 외부 단계에서는 개별 사용자가 데이터베이스를 어떻게 보는가를 표현하므로, 사용자가 필요한 데이터베이스를 정의한 것을 외부 스키마 라고 한다.
- 외부 스키마는 사용자마다 다르며, 전체 데이터베이스 중 사용자가 관심을 가지는 일부분으로 보기에 서브 스키마라고도 부른다.
#### 개념 단계
> 데이터베이스를 조직 전체의 관점에서 이해하고 표현
> 데이터베이스 설계자, DB 관리자가 데이터베이스 전체 구조 설계

- 개념 스키마는 전체 데이터베이스에 어떤 데이터가 저장되는지, 데이터들 간에는 어떤 관계가 존재하고, 어떤 제약조건이 있는지에 대한 정의뿐 아니라 데이터에 대한 보안정책, 접근 권하에 대한 정의도 포함
- 데이터를 물리적으로 저장하는 방법이나 데이터 저장 장치와는 독립적이다.
- 하나의 데이터베이스에는 개념 스키마가 하나만 존재하며, 각 사용자는 개념 스키마의 일부분을 사용한다.

#### 내부 단계
> 저장 장치의 관점에서 이해하고 표현, 실제로 저장되는 방법을 정의

- 내부 스키마는 하나의 데이터베이스에 하나만 존재
![](https://i.imgur.com/PxynNTo.png)
### 데이터의 독립성
> 데이터베이스를 3단계 구조로 나누고 단계별로 스키마를 유지하며, 스키마 사이의 대응 관계를 정의하는 궁극적인 목표는 데이터 독립성을 실현하기 위함

- 데이터 독립성 : 하위 스키마를 변경하더라도 상위 스키마가 영향을 받지 않는 특성
- 예를 들어 내부 스키마(디스크 저장 방식) 을 바꾸더라도 외부 사용자 화면은 그대로 유지

그런데 외부 스키마는 개념 스키마의 일부를 보는데 독립성이 유지가 되는가?
> 상황에 따라 영향이 있을 수도, 없을 수도 있다.

1. 외부 스키마는 개념 스키마의 'view' 같은 거다
	- 외부 스키마는 개념 스키마를 기반으로 부분적으로 정의된 사용자 전용 구조
	- 따라서 개념 스키마가 변경되면 외부 스키마가 참조하고 있는 부분이 영향을 받을 수 있음
2. 근데 왜 독립적이라고 했는가?
	- 논리적 데이터 독립성(logical data independence) 때문

#### 논리적 데이터 독립성
> 개념 스키마가 바뀌더라도 외부 스키마는 가능한 변경없이 계속 사용할 수 있도록 하는 것
>외부/개념 사상 정보만 적절히 수정해주면 직접 관련이 없는 사용자를 위한 외부 스키마는 변경할 필요가 없다

##### 외부 / 개념 사상 정보 
>외부 스키마와 개념 스키마 간의 차이를 조율해주는 '지도(map)' 역할을 하는 정보
외부-개념 매핑(external/conceptual mapping) 또는 사상 정보(mapping information) 이라고 함

- 왜 필요 한가?
	- 각 사용자는 개념  스키마 중 일부만 보고 자기 입맛에 맞게 필드를 바꿔서 사용하기도 하는데 이걸 연결해주는 것이 외부/개념 사상 정보
- 예시
아래는 개념 스키마 구조

| **emp_id** | **emp_name** | **salary** | **department** |
| ---------- | ------------ | ---------- | -------------- |
| 101        | 홍길동          | 5000       | 개발팀            |
| 102        | 이몽룡          | 4800       | 디자인팀           |
| 103        | 성춘향          | 5300       | 개발팀            |
외부 스키마는 급여 정보는 필요 없고 이름이랑 부서만 보고 싶음

| **emp_id** | **emp_name** | **department** |
| ---------- | ------------ | -------------- |
| 101        | 홍길동          | 개발팀            |
| 102        | 이몽룡          | 디자인팀           |
| 103        | 성춘향          | 개발팀            |
이것이 사용자가 보는 맞춤형 화면(외부 스키마 뷰)

아래 표가 어떤 테이블, 어떤 칼럼을 보고 있는지 DBMS가 알아야 하는 정보를 저장해둔 외부/사상 정보

| **외부 스키마 컬럼** | **연결된 개념 스키마 컬럼** |
| ------------- | ----------------- |
| emp_id        | emp_id            |
| emp_name      | emp_name          |
| department    | department        |

#### 물리적 데이터 독립성
> 내부 스키마가 변경되더라도 개념 스키마가 영향을 받지 않는것
> 따라서 외부 스키마도 영향을 받지 않는다

##### 개념 / 내부 사상 정보
위와 마찬가지로 데이터베이스의 저장 구조가 변경되어도 관련된 개념/내부 사상 정보만 수정해주면 되는데
표로 예시를 보면

DBMS가 데이터를 실제로 파일에 어떻게 저장하는지에 대한 정보

| **컬럼 이름**     | **파일 이름** | **위치 (Offset)** | **데이터 타입**  | **인덱스 있음?** |
| ------------- | --------- | --------------- | ----------- | ----------- |
| emp_id        | emp.tbl   | 0               | INT         | 있음          |
| emp_name      | emp.tbl   | 4               | VARCHAR(20) | 없음          |
| salary        | emp.tbl   | 24              | INT         | 있음          |
| department_id | emp.tbl   | 28              | INT         | 없음          |

개념/내부 사상 정보 - 연결정보
"개념 스키마에서 쓰는 데이터가 실제 어디에 어떻게 저장되어 있는가?" 라는 연결표

| **개념 스키마 컬럼** | **내부 스키마 위치 및 타입**         |
| ------------- | -------------------------- |
| emp_id        | emp.tbl, offset 0, INT     |
| emp_name      | emp.tbl, offset 4, VARCHAR |
| salary        | emp.tbl, offset 24, INT    |
| department    | emp.tbl, offset 28, INT    |

정리하면 아래 표와 그림으로 이해할 수 있다.

|**구분**|**역할**|**누구용?**|
|---|---|---|
|**외부 스키마**|사용자 입장에서 보는 맞춤형 데이터 뷰|사용자/프로그램|
|**개념 스키마**|전체 데이터의 구조 (논리적 구조)|DB 전체 설계자|
|**내부 스키마**|물리적 저장 방식 (파일 구조, 저장 위치 등)|DBMS|

|**사상 정보**|**역할**|
|---|---|
|외부 ↔ 개념 사상 정보|사용자 뷰와 실제 테이블 구조 연결|
|개념 ↔ 내부 사상 정보|테이블 구조와 실제 파일 저장 구조 연결|
![](https://i.imgur.com/iesHly4.png)
> GPT로 만든 이미지인데, 글씨가 다소 이상하지만 알아보기엔 문제 없는듯...

### 데이터 사전
> 데이터 베이스에 저장되는 데이터에 관한 정보를 저장하는 곳으로
> 데이터사전(data dictionary) 또는 시스템 카탈로그(system catalog) 라고 함

데이터 사전은 일반 사전 처럼 데이터베이스에 저장되어 있는 데이터를 정확하고 효율적으로 이용하기 위해 참고해야 되는 스키마, 사상 정보, 다양한 제약조건 등을 저장하고 있다.
데이터에 대한 데이터(data about data) 를 의미해 meta data 라고도 한다.

데이터 사전 역시 데이터를 저장하는 데이터베이스의 일종이기에, 시스템 데이터베이스 라고도 하는데
일반 사용자가 이용하는 것은 구분을 위해 데이터 베이스라고 부른다

또한 데이터 사전은 DBMS가 스스로 생성하고 유지하는 것으로 일반 사용자도 접근은 가능하나 추가나 수정은 DBMS만 가능하다

데이터 사전에 있는 데이터에 실제 접근을 위한 위치 정보는 데이터 디렉터리(data directory)에서 관리하는데 데이터 디렉터리는 시스템만 접근할 수 있다.


## 데이터베이스 사용자
> 사용자는 데이터 베이스를 이용하기 위해 접근하는 모든 사람을 의미

![](https://i.imgur.com/93pNT5y.png)

1. 데이터 베이스 관리자 
	- 전체 데이터 베이스 구조를 설계(개념 스키마, 보안 정책 등)
	- 사용자 계정/권한 관리
	- 성능 