# 현재 상황
- 서버에 global로 nginx는 설치된 상태

# 도커 설치
```
# 1. 기존 도커 관련 패키지 삭제 (혹시 모를 충돌 방지)
# 이전에 도커를 설치한 적이 있다면 이 명령어를 실행하여 잔여 파일을 제거합니다.
# 처음 설치하는 경우에도 실행해도 무방합니다.
for pkg in docker.io docker-doc docker-compose docker-compose-v2 podman-docker containerd runc; do sudo apt remove $pkg; done

# 2. 필수 패키지 설치
# HTTPS를 통해 저장소에 접근하기 위한 패키지들입니다.
sudo apt update
sudo apt install ca-certificates curl gnupg lsb-release -y

# 3. 도커 공식 GPG 키 추가
# 도커 패키지의 신뢰성을 확인하기 위한 GPG 키를 추가합니다.
sudo install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
sudo chmod a+r /etc/apt/keyrings/docker.gpg

# 4. 도커 APT 레포지토리 설정
# 도커 패키지를 다운로드할 수 있는 저장소(repository)를 시스템에 추가합니다.
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
  $(. /etc/os-release && echo "$VERSION_CODENAME") stable" | \
  sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# 5. 도커 엔진 및 도커 컴포즈 설치
# 이제 도커 엔진과 도커 컴포즈 플러그인을 설치합니다.
sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin -y

# 6. 현재 사용자를 docker 그룹에 추가 (sudo 없이 docker 명령어 사용 가능)
# 이 명령어를 실행하면 'ubuntu' 사용자가 'docker' 그룹에 추가되어,
# 'sudo' 없이 'docker' 명령어를 사용할 수 있게 됩니다.
sudo usermod -aG docker $USER

# **매우 중요:**
# 위 6번 명령을 적용하려면 **서버에서 로그아웃 후 다시 로그인**하거나 서버를 **재부팅**해야 합니다.
# 재부팅 후 다음 명령어로 도커 설치를 확인합니다.
docker run hello-world
# `Hello from Docker!` 메시지가 보이면 성공입니다.

docker compose version
# `Docker Compose version v2.x.x` 와 같이 나오면 성공입니다.
```
