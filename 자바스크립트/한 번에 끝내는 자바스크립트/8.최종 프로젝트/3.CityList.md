app.js
```js
import Header from './components/Header.js';
import RegionList from './components/RegionList.js';
import CityList from './components/CityList.js';
import CityDetail from './components/CityDetail.js';
//API
import { request } from './components/api.js';

export default function App($app) {
    this.state = {
        startIdx: 0,
        sortBy: '',
        searchWord: '',
        region: '',
        cities: '',
    };

    const header = new Header();
    const regionList = new RegionList();
    const cityList = new CityList({
        $app,
        initialState: this.state.cities,
        handleLoadMore: async () => {
            const newStartIdx = this.state.startIdx + 40;
            const newCities = await request(newStartIdx, this.state.region, this.state.sortBy, this.state.searchWord);
            this.setState({
                ...this.State,
                startIdx: newStartIdx,
                cities: {
                    cities: [...this.state.cities.cities, ...newCities.cities],
                    isEnd: newCities.isEnd,
                }
            })
        }
    });
    const cityDetail = new CityDetail();

    this.setState = (newState) => {
        this.state = newState;
        cityList.setState(this.state.cities);
    };

    const init = async () => {
        const cities = await request(this.state.startIdx, this.state.region, this.state.sortBy, this.state.searchWord);
        console.log("init cities: ", cities);
        this.setState({
            ...this.state,
            cities: cities,
        });
    };

    init();
}
```

CityList.js
```js
export default function CityList({$app, initialState,handleLoadMore}) {
    this.state = initialState;
    this.$target = document.createElement('div');
    this.$target.className = 'city-list';
    this.handleLoadMore = handleLoadMore;
    $app.appendChild(this.$target);

    this.template = () => {
        let temp = `<div class ="city-items-container">`
        if (this.state) {
            this.state.cities.forEach((element) => {
                temp += `
                    <div class="city-item" id=${element.id}>
                        <img src=${element.image}></img>
                        <div class="city-item-info">${element.city},${element.counrty}</div>
                        <div class="city-item-score">â­ï¸ ${element.total}</div>
                    </div>
                `;
            });
            temp += `</div>`
        }
        return temp;
    };
    this.render = () => {
        this.$target.innerHTML = this.template();
        if (this.state.isEnd === false) {
            const $loadMoreButton = document.createElement('button');
            $loadMoreButton.className = 'add-items-btn';
            $loadMoreButton.textContent = '+ ë”ë³´ê¸°';
            this.$target.appendChild($loadMoreButton);

            $loadMoreButton.addEventListener('click', () => {
                this.handleLoadMore();
            })
        }
    }
    this.setState = (newState) => {
        this.state = newState;
        this.render();
    }
    this.render();
}
```

`$target` ì— `div` íƒœê·¸, `city-list`ë¼ëŠ” classnameì„ ê°€ì§€ê³  ìˆëŠ” í˜•íƒœë¥¼ ë§Œë“¤ê³  `$app` íƒœê·¸ í•˜ìœ„ì— ì¶”ê°€

ê·¸ í•˜ìœ„ì— `city-items-container` classë¥¼ ê°€ì§„ `div` ë¥¼ ì¶”ê°€í•˜ì—¬ ë Œë”ë§í•œë‹¤.

ë”ë³´ê¸° ë²„íŠ¼ì€ `isEnd`ë¥¼ ë³´ê³  ì„¤ì •


ì—¬ê¸°ì„œ`this.handleLoadMore = handleLoadMore;`ë¥¼ ì‚¬ìš©í•œ ì´ìœ ëŠ”?
ë‚˜ì¤‘ì— ë‚´ë¶€ì—ì„œ êº¼ë‚´ ì“°ê¸° ìœ„í•´ì„œ thisë¡œ ë°”ì¸ë”© í•œê²ƒ

- ì „ë‹¬ë°›ì€ ì½œë°±ì„ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ê³„ì† ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì €ì¥

| ë¹„êµ í•­ëª©      | ì§ì ‘ í˜¸ì¶œ (`handleLoadMore()`) | ì €ì¥ í›„ í˜¸ì¶œ (`this.handleLoadMore()`) |
| ---------- | -------------------------- | --------------------------------- |
| ë™ì‘ ì—¬ë¶€      | O (ê°€ëŠ¥)                     | O (ê°€ëŠ¥)                            |
| ê°€ë…ì„±        | ğŸ”¸ ë§¤ê°œë³€ìˆ˜ì— ìˆëŠ”ì§€ ì•Œê¸° í˜ë“¦         | âœ… ëª…í™•í•˜ê²Œ ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œí¼í‹°ë¡œ í™•ì¸ ê°€ëŠ¥          |
| ì¬ì‚¬ìš©ì„±       | âŒ ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥              | âœ… ì»´í¬ë„ŒíŠ¸ ì „ì²´ì—ì„œ ììœ ë¡­ê²Œ ì‚¬ìš© ê°€ëŠ¥            |
| êµ¬ì¡° ë³€ê²½ ì‹œ ìœ„í—˜ | âŒ render() ë°”ê¹¥ì—ì„  ëª» ì”€        | âœ… ì–´ë””ì„œë“  ì“¸ ìˆ˜ ìˆìŒ (í´ë˜ìŠ¤ì²˜ëŸ¼)             |

ë§Œì•½ ì•„ë˜ ì²˜ëŸ¼ ë˜ì–´ìˆì„ ë•Œ
handleLoadMore ì˜ ìŠ¤ì½”í”„ëŠ” CityList.jsì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥

```js
export default function CityList({ $app, initialState, handleLoadMore }) {
    // ì—¬ê¸´ CityList í•¨ìˆ˜ ë‚´ë¶€ ìŠ¤ì½”í”„!
    
    this.state = initialState;
    this.$target = document.createElement('div');
    this.$target.className = 'city-list';

    // âŒ ì´ ì¤„ì´ ì—†ìœ¼ë©´:
    // this.handleLoadMore = handleLoadMore;

    $app.appendChild(this.$target);

    this.render = () => {
        // ì—¬ê¸°ì„œ handleLoadMoreëŠ” "CityList í•¨ìˆ˜ ì¸ìë¡œ ë°›ì€ ë³€ìˆ˜"
        handleLoadMore(); // O
        this.handleLoadMore(); // âŒ ì—†ìœ¼ë©´ ì—ëŸ¬
    };
}
```

ì¦‰ CityList.js ì—ì„œëŠ” íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•˜ê¸°ì— ì–´ë””ì„œë“  ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.

í•˜ì§€ë§Œ, 