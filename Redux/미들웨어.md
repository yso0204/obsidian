# ë¯¸ë“¤ì›¨ì–´ë€ ë¬´ì—‡ì¸ê°€?
Middleware = ì¤‘ê°„ì—ì„œ ì²˜ë¦¬í•´ ì£¼ëŠ” ê²ƒ

Reduxì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ íë¦„ì´ ìˆë‹¤.
```
UI -> dispatch(action) -> reducer -> store -> UI ì—…ë°ì´íŠ¸
```

ê·¸ëŸ°ë°, actionì„ reducerë¡œ ë³´ë‚´ê¸° ì „, **ì¸í„°ì…‰íŠ¸í•´ì„œ ì²˜ë¦¬** í•˜ê³  ì‹¶ì„ ë•Œê°€ ìˆëŠ”ë°,
- api í˜¸ì¶œ
- ë¡œê·¸ ì°ê¸°
- debug íˆ´ ì—°ê²°
- actionì— ì¡°ê±´ ë‹¬ê¸°

ì´ ë•Œ, 'dispatch'ì™€ 'reducer' ì‚¬ì´ì— ë¼ì–»ë“œëŠ” ì¤‘ê°„ ë‹¨ê³„ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ê²ƒì´ **middleware** ì´ë‹¤.

## Redux íë¦„ì— middleware ê°€ ë“¤ì–´ê°€ë©´?
```
UI â†’ dispatch(action)
                â†“
           [ Middleware]
                â†“
          Reducer â†’ Store â†’ UI ì—…ë°ì´íŠ¸
```

## middlewareê°€ í•˜ëŠ” ì¼

- dispatchê°€ í˜¸ì¶œë  ë•Œ, Actionì„ **ê°€ë¡œì±”**
- í•„ìš”í•œ ì‘ì—…ì„ í•˜ê³  -> ë‹¤ìŒìœ¼ë¡œ ë„˜ê¸°ê±°ë‚˜, ë§‰ì„ ìˆ˜ ìˆë‹¤.
```js
const middleware = store => next => action => {
	consol.log('action ë°œìƒ',action);
	next(action); //ë‹¤ìŒ ë‹¨ê²Œë¡œ ë³´ë‚´ê¸°(reducerë¡œ ë³´ë‚´ëŠ” ê²ƒ)
}
```


# Redux Thunk ë¯¸ë“¤ì›¨ì–´ëŠ” ë¬´ì—‡ì„ í•˜ëŠ”ê°€?
> Reduxì˜ ê¸°ë³¸ dispatchëŠ” ì›ë˜ "ê°ì²´"ë§Œ ë°›ëŠ”ë‹¤

```js
dispatch({type: 'INCREMENT'}) // OK
dispatch(fetchData()); // X ì›ë˜ í•¨ìˆ˜ë¥¼ dispatchì— ë°›ìœ¼ë©´ ì—ëŸ¬
```

Thunk ë¯¸ë“¤ì›¨ì–´ê°€ í•˜ëŠ” ì—­í• 
- dispatchì— 'í•¨ìˆ˜'ê°€ ë“¤ì–´ì˜¤ë©´, ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•´ì„œ **ë¹„ë™ê¸° ì²˜ë¦¬ ê°€ëŠ¥** í•˜ê²Œ í•´ì¤Œ
- Thunkë¥¼ ì‚¬ìš©í•˜ë©´
```js
dispatch(fetchData()); 
// Thunk í•¨ìˆ˜ê°€ ì‹¤í–‰ë¨ -> api í˜¸ì¶œ í›„ -> ë‚´ë¶€ì—ì„œ ë˜ dispatch  ê°€ëŠ¥
```

## íë¦„
```
ğŸ‘‰ dispatch(fetchData())  // fetchDataëŠ” í•¨ìˆ˜ì„!
        â†“
ğŸ‘‰ Thunk ë¯¸ë“¤ì›¨ì–´ê°€ "í•¨ìˆ˜ë„¤? ë‚´ê°€ ì‹¤í–‰í• ê²Œ!" í•˜ê³  ì‹¤í–‰
        â†“
ğŸ‘‰ API í˜¸ì¶œ ì§„í–‰ (await fetch...)
        â†“
ğŸ‘‰ API ê²°ê³¼ ë°›ìœ¼ë©´ ë‚´ë¶€ì—ì„œ dispatch({ type: 'FETCH_SUCCESS', payload }) í˜¸ì¶œ
        â†“
ğŸ‘‰ ì´ dispatchëŠ” ê°ì²´ë‹ˆê¹Œ â†’ Reducerë¡œ ì •ìƒì ìœ¼ë¡œ ë“¤ì–´ê°
        â†“
ğŸ‘‰ Reducerê°€ state ì—…ë°ì´íŠ¸ â†’ Store â†’ UI ì—…ë°ì´íŠ¸
```

## ì˜ˆì‹œ ì½”ë“œ
```js
//App.js
<button onClick={() => dispatch(fetchData())}>Fetch Data</button>
//action.js
export const fetchData = () => {
    return async (dispatch) => {
        try {
            const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');
            const data = await response.json();
            dispatch(fetchDataSuccess(data)); // ì„±ê³µí•œ ê²°ê³¼ë¥¼ dispatch
        } catch (error) {
            console.error('API í˜¸ì¶œ ì—ëŸ¬:', error);
        }
    };
};
```

## ì™œ Middlewareê°€ í•„ìš”í•œê°€?
-  ReduxëŠ” ì›ë˜ ìˆœìˆ˜í•˜ê³  ë‹¨ìˆœí•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë¹„ë™ê¸° ê¸°ëŠ¥ì€ ì›ë˜ ì—†ìŒ
- ê·¸ë˜ì„œ ë¹„ë™ê¸° API í˜¸ì¶œ ê°™ì€ ê±´ Middlewareì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²Œ ì›ì¹™

## middleware ë¹„ìœ 
