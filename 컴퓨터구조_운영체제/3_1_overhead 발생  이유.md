>Chatpgt 답변


프로세스 간 **context switching** 시에 **오버헤드(overhead)**가 발생하는 이유는 다음과 같은 **비용(cost)**이 들기 때문이야:

---

### ✅ 1. **레지스터 저장 및 복원 비용**

- CPU는 현재 실행 중인 프로세스의 상태(Program Counter, Stack Pointer, General Purpose Register 등)를 저장해야 해.
    
- 그리고 새로 실행할 프로세스의 상태를 복원해야 하지.
    
- 이 저장/복원 과정은 시간이 걸리고, CPU 자원을 소비함.
    

---

### ✅ 2. **캐시 미스(Cache Miss)**

- 각 프로세스는 자신만의 **메모리 접근 패턴**을 가지고 있어.
    
- 프로세스를 전환하면 **CPU 캐시(L1/L2 cache)**에 있던 데이터가 새로운 프로세스와 무관한 데이터일 가능성이 높아.
    
- 이로 인해 캐시 미스가 증가 → **메모리 접근 지연 시간 증가** → 성능 저하.
    

---

### ✅ 3. **TLB Flush (Translation Lookaside Buffer Flush)**

- TLB는 가상 주소 → 물리 주소 변환을 빠르게 하기 위한 캐시야.
    
- 프로세스가 바뀌면 해당 프로세스의 주소 공간 정보가 바뀌기 때문에 기존 TLB 내용이 무효화됨.
    
- 새로운 프로세스의 주소 변환 정보를 다시 로딩해야 함 → 성능 저하.
    

---

### ✅ 4. **스케줄러 연산 비용**

- 어떤 프로세스로 전환할지 결정하는 것도 작업이야.
    
- 특히 커널 모드에서 동작하는 스케줄러는 여러 프로세스의 상태를 판단하고 우선순위를 따져서 선택해야 해.
    
- 이 과정도 CPU 시간을 소비함.
    

---

### ✅ 5. **모드 전환(User ↔ Kernel Mode) 비용**

- context switch는 보통 사용자 모드에서 커널 모드로, 다시 사용자 모드로 전환되는 과정을 포함해.
    
- 모드 전환 자체도 CPU 내부적으로 여러 동작이 필요해서 비용이 발생함.
    

---

### ✅ 요약

| 원인         | 설명                                 |
| ---------- | ---------------------------------- |
| 레지스터 저장/복원 | 이전 프로세스의 상태를 저장하고, 다음 프로세스의 상태를 복원 |
| 캐시 미스      | 프로세스 변경 시 캐시 불일치 발생 가능성 높음         |
| TLB flush  | 주소 공간 변경으로 TLB 무효화 필요              |
| 스케줄러 비용    | 어떤 프로세스로 전환할지 계산                   |
| 모드 전환      | 사용자 ↔ 커널 모드 전환도 비용 발생              |